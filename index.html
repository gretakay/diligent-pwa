<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¯æ—¥ç™¼å››å¼˜èª“é¡˜æé†’</title>
    <link rel="icon" href="icon.png">
    <link rel="manifest" href="manifest.json">
</head>
<body>
    <h1>æ¯æ—¥ç™¼å››å¼˜èª“é¡˜æé†’</h1>

    <!-- é¸æ“‡æé†’æ™‚é–“ -->
    <label for="hourSelect">è¨­å®šæ¯æ—¥æé†’æ™‚é–“ï¼š</label>
    <select id="hourSelect"></select> æ™‚
    <select id="minuteSelect"></select> åˆ†

    <!-- è¨­å®šæŒ‰éˆ• -->
    <button id="saveReminder">å„²å­˜æé†’</button>
    <button id="enablePush">å•Ÿç”¨æ¯æ—¥æé†’</button>

    <p id="statusMessage"></p> <!-- ç‹€æ…‹è¨Šæ¯é¡¯ç¤ºå€ -->

    <!-- å¼•å…¥ JavaScript -->
    <script type="module">
        import { setReminder, subscribeToPush } from "./app.js";

        // å‹•æ…‹ç”Ÿæˆ å°æ™‚ & åˆ†é˜ é¸å–®
        function populateTimeOptions() {
            const hourSelect = document.getElementById("hourSelect");
            const minuteSelect = document.getElementById("minuteSelect");

            // ç”Ÿæˆå°æ™‚ (0 - 23)
            for (let i = 0; i < 24; i++) {
                let hour = i < 10 ? `0${i}` : i; // æ ¼å¼åŒ–ç‚º å…©ä½æ•¸
                let option = new Option(hour, hour);
                hourSelect.add(option);
            }

            // ç”Ÿæˆåˆ†é˜ (00, 05, 10, ..., 55)
            for (let i = 0; i < 60; i += 5) {
                let minute = i < 10 ? `0${i}` : i; // æ ¼å¼åŒ–ç‚º å…©ä½æ•¸
                let option = new Option(minute, minute);
                minuteSelect.add(option);
            }
        }

        // å„²å­˜æé†’æ™‚é–“
        document.getElementById("saveReminder").addEventListener("click", () => {
            setReminder();
            document.getElementById("statusMessage").textContent = "ğŸ“… æé†’æ™‚é–“å·²å„²å­˜ï¼";
        });

        // å•Ÿç”¨ Web Push é€šçŸ¥
        document.getElementById("enablePush").addEventListener("click", async () => {
            await subscribeToPush();
            document.getElementById("statusMessage").textContent = "ğŸ”” æ¨æ’­é€šçŸ¥å·²å•Ÿç”¨ï¼";
        });

        // é é¢åŠ è¼‰å¾Œå¡«å……æ™‚é–“é¸å–®
        document.addEventListener("DOMContentLoaded", populateTimeOptions);
    </script>
</body>
</html>
